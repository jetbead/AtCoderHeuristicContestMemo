# THIRDプログラミングコンテスト2021(AtCoder Heuristic Contest 007)
- https://atcoder.jp/contests/ahc007

## 問題概要
- 頂点数N、辺の数Mの無向グラフがあり、辺iの長さlは、頂点間のユークリッド距離をdとすると、d<=l<=3*dであるが、正確な値は最初はわからない
- ターンiでは、辺iの正確な距離が与えられるので、その辺を選択するか否かを答える
- 最終的に選んだ辺が全域木になっており、その選択した辺の長さの合計が最小になるようにせよ

## 時間
240分

## 解説
(50位まで&発言を見つけられた方のみ)

- [解説(公式)](https://atcoder.jp/contests/ahc007/editorial)
- [writer解(wataさん)](https://twitter.com/wata_orz/status/1469986628517376004)
    - https://twitter.com/wata_orz/status/1469992225484713984
    - https://twitter.com/wata_orz/status/1470733095179792385
    - https://twitter.com/wata_orz/status/1470767323510616065
    - https://twitter.com/wata_orz/status/1470768152649027588
- [社長解(chokudaiさん)](https://twitter.com/chokudai/status/1469987427393892353)
- 1位yokozuna57さん
- [2位square1001さん](https://twitter.com/square10011/status/1469986298685722633)
- [3位bin101さん](https://twitter.com/5bin101/status/1469992023121924101)
- 4位USAさん
- 5位tanzakuさん
- [6位saharanさん](https://twitter.com/shr_pc/status/1469989780809478147)
    - https://twitter.com/shr_pc/status/1469995102513033222
- [7位tute7627さん](https://twitter.com/tute7627/status/1469986542563491840)
    - https://twitter.com/tute7627/status/1469991054283710464
- [8位olpheさん](https://twitter.com/_olphe/status/1469985927556927494)
    - https://twitter.com/_olphe/status/1469990829909745669
- 9位Aquariusさん
- 10位Nyaanさん
- [11位kawateaさん](https://twitter.com/kawatea03/status/1469987323610013700)
- [12位daijuさん](https://twitter.com/WniKwo/status/1469987016536629248)
- [13位firiexpさん](https://twitter.com/m_idiri/status/1469986645013561346)
- [14位Shibungiさん](https://twitter.com/Shibungi_kyopro/status/1469987076926238720)
- 15位hiikunZさん
- 16位asi1024さん
- 17位ynasuさん
- 18位hoshi524さん
- [19位noimiさん](https://twitter.com/noimi_kyopro/status/1469986997582594050)
- 20位ats5515さん
- [21位cunitacさん](https://twitter.com/CUteNeuron/status/1469987798388453381)
- [22位terry_u16さん](https://twitter.com/terry_u16/status/1469991344982888448)
    - https://www.terry-u16.net/entry/ahc007-explanation
- 23位ashmelevさん
- 24位rngさん
- [25位rabotさん](https://twitter.com/tanaka_a8/status/1470010825666891785)
- 26位mtsdさん
- 27位Rafbillさん
- 28位krさん
- 29位notさん
- [30位hamamuさん](https://twitter.com/hamamu_kyopro/status/1470007379609931777)
- 31位kai1000_don
- [32位threecourseさん](https://twitter.com/threecourse/status/1469986759274803204)
- [33位sansenさん](https://twitter.com/akakimidori/status/1469986752370995206)
    - https://twitter.com/akakimidori/status/1469986907455365124
    - https://twitter.com/akakimidori/status/1469989653218758665
- 34位btk15049さん
- [35位fuppy0716さん](https://twitter.com/fuppy_kyopro/status/1469986470257901570)
    - https://twitter.com/fuppy_kyopro/status/1469987223961751554
    - https://twitter.com/fuppy_kyopro/status/1469986968360873986
- 36位roto_37さん
- 37位cuthbertさん
- 38位ymatsuxさん
- [39位assyさん](https://twitter.com/assy1028/status/1469988350279176192)
    - https://assy.hatenablog.jp/entry/2021/12/13/205320
- [40位tsukammoさん](https://twitter.com/tsukammo/status/1469985929826021376)
- 41位HIIRAGIchanさん
- 42位Forestedさん
- [43位shibh308さん](https://twitter.com/shibh308/status/1469986167567581186)
- [44位phocomさん](https://twitter.com/_phocom/status/1469995485239078913)
- [45位suisenさん](https://twitter.com/_su1sen/status/1469986769383079937)
- 46位iehnさん
- 47位sensaurさん
- [48位tomerunさん](https://twitter.com/tomerun/status/1469986110281760774)
- 49位kuhakuさん
- [50位iraytnoさん](https://twitter.com/iray_tno/status/1469989827613700100)

## Links
- [agwさんTwitterまとめ](https://togetter.com/li/1815565)
- [Twitter hashtag AHC007](https://twitter.com/hashtag/AHC007)

## 個人的メモ
- 毎ターン、その辺を選択した/選択しなかった場合の「最終的な最小全域木の総距離の期待値」を計算できれば、期待値が低くなる場合に選択、そうでないなら選択しない、とするgreedyが考えられる
- 期待値を正確に算出するのは難しいので、近似的に求めることになる

### 近似の仕方
- l=2dを仮定
    - https://www.terry-u16.net/entry/ahc007-explanation
    - 残りの不明な辺の長さをl=2dと仮定するのは、実はそんなに良い解が得られない
    - 目指している解ではl=dに近い辺を採用しているはずなので、大きめに期待値を計算している可能性
    - 2じゃなく少し小さめの値にすると少しだけよくなる
- モンテカルロ法
    - 長さが不明な辺に対して実際に値を割り当ててみたものをいくつか用意して、コスト平均を見る
- wataさんのDP解

### その他の方針
- 辺の採用確率
    - ランダムに辺の長さを割り当てたグラフをいくつか用意して最小全域木を計算
    - 作った最小全域木でその辺が採用される確率がX以上なら採用

### その他
- 近くの辺のみ考慮
    - グラフを見ると結構「塊」みたいになっているので、近くの辺だけを考えるなどの高速化は有効だった模様
- ランダムに辺の値を決めるときに乱数の範囲d〜3dではなく、少し狭めると結構変わるっぽい
